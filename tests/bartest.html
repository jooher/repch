<html>
<head>
<style>canvas{display:block;}</style>

<script src="../barkodnik.js"></script>

</head>
<body>
<canvas id="canvas" width="640" height="200" style="border:1px solid"></canvas>
<input  id="thresh" type="range" value="14" min="1" max="32" onchange="calc()" style="width:600px"/>

<script>

let	context;

const	
	threshEl	= document.getElementById("thresh"),
	canvasEl	= document.getElementsByTagName("canvas")[0],

	
	calc		= _=>{
	
		const	thresh=1<<threshEl.value, //14
			h2=document.createElement("h2");
			
		h2.textContent=thresh;
		document.body.insertBefore(h2,threshEl);
		
		Ys.forEach(Y=>{
			const canvas=canvasEl.cloneNode(true);

			document.body.insertBefore(canvas,threshEl);
			context=canvas.getContext('2d');
			
			Barkodnik.setDraw(context,{Y:"rgba(0,0,0,.25)",I:true,W:"rgba(255,0,0,.5)", T:"black"});

			const	
				b=Barkodnik.fromLine(Y,thresh);//Execute();
		});
		
	};
	

const	
	
Ys	= 
[

	[329,325,290,277,286,275,272,272,263,242,244,226,215,215,211,211,220,205,202,194,208,204,182,200,198,198,192,189,192,192,188,184,197,189,184,178,180,172,169,172,186,179,178,174,163,156,163,196,233,161,145,130,113,57,27,15,0,0,0,0,12,42,74,91,134,235,327,274,162,135,135,124,124,135,134,134,129,135,136,136,160,167,147,130,134,131,119,106,111,115,111,114,127,119,117,113,124,114,106,96,92,79,70,63,50,60,62,65,74,85,81,60,57,54,54,49,50,54,47,44,33,37,43,47,57,60,52,55,60,54,61,58,52,59,62,64,61,67,65,62,64,67,50,50,69,60,58,61,51,51,62,58,56,71,54,54,55,52,45,45,57,54,57,60,61,64,62,66,70,70,66,77,73,68,46,22,119,378,511,521,526,481,457,465,492,486,470,470,469,461,474,485,462,454,480,483,464,457,448,448,494,494,467,488,559,515,210,124,377,506,382,126,275,509,469,133,184,485,469,137,10,44,65,51,32,27,176,460,534,528,512,324,132,296,489,393,69,28,31,24,69,274,503,543,482,482,533,460,237,23,23,178,424,486,272,141,368,507,455,153,211,538,544,464,482,527,485,153,20,40,241,507,551,517,472,528,509,214,148,303,530,542,517,293,160,246,501,441,145,32,39,31,65,281,480,547,536,483,204,158,456,519,340,162,327,478,349,156,328,496,448,118,28,84,330,511,539,532,478,210,29,33,244,443,472,296,21,25,27,31,207,439,552,556,500,277,174,364,508,456,112,34,125,381,484,452,176,40,89,328,511,546,557,473,189,32,79,277,494,543,553,462,201,39,53,271,451,448,253,50,63,253,423,433,242,50,53,248,457,533,551,498,336,84,28,30,90,298,462,538,525,375,209,209,432,432,236,215,449,449,209,212,431,539,504,465,499,493,466,469,488,505,513,509,484,484,488,485,480,490,501,504,474,492,498,504,513,559,514,336,161,22,9,23,28,28,35,39,29,23,26,28,31,37,38,28,31,38,47,50,36,28,32,37,46,39,44,36,29,26,31,34,40,29,33,30,25,46,53,36,27,31,37,33,36,29,24,26,41,41],
	[ 374,392,385,390,388,395,393,379,418,404,404,399,396,407,404,389,409,423,401,412,427,416,417,403,422,436,422,436,425,425,434,423,431,419,428,420,440,457,444,460,458,427,457,445,456,448,459,462,470,460,460,463,471,471,471,468,468,460,480,466,465,473,471,471,480,473,472,472,484,474,487,487,494,490,493,493,495,498,498,498,497,494,491,491,499,499,507,507,514,514,512,508,518,507,525,515,524,524,520,526,520,526,533,533,535,531,531,531,541,541,537,528,510,507,501,498,493,493,489,492,474,500,497,501,520,517,522,522,529,526,509,516,514,506,494,494,472,465,463,456,434,427,437,384,240,124,81,81,85,68,67,64,67,75,86,110,87,333,539,524,513,492,513,471,495,481,503,496,498,498,497,493,488,488,494,498,500,521,528,525,503,521,496,504,507,507,507,497,496,506,498,508,509,512,509,509,493,496,485,395,145,113,67,463,434,487,349,32,116,88,485,485,524,413,81,88,82,79,104,59,89,93,107,75,461,503,499,524,55,100,72,93,91,109,96,273,522,518,527,527,524,524,529,529,539,560,290,60,132,142,481,547,532,543,524,512,538,268,71,118,190,543,510,501,305,30,124,134,451,531,507,543,538,529,526,571,112,133,102,90,92,92,93,89,88,93,65,152,555,527,531,534,543,535,557,330,137,122,96,449,529,532,536,536,524,539,516,69,119,116,72,121,113,29,304,548,512,540,374,57,150,69,386,550,523,531,536,536,532,529,218,68,104,69,88,85,82,82,88,88,55,146,487,538,549,531,538,532,518,498,107,159,92,113,98,95,29,211,511,559,543,535,532,550,551,512,154,133,76,177,521,524,547,526,188,53,73,211,472,538,502,495,194,86,87,42,465,514,508,550,277,50,132,30,397,532,507,525,523,526,545,527,532,539,541,523,530,527,524,537,486,116,153,84,82,511,484,489,527,251,138,138,91,361,502,534,516,516,511,523,539,528,507,537,513,482,67,113,63,192,508,511,511,529,527,495,520,489,57,88,120,82,55,55,59,59,62,66,63,42,528,468,470,515,67,120,109,40,555,504,527,527,538,517,524,521,103,108,100,83,523,492,504,489,88,119,62,233,528,528,528,537,524,528,526,520,528,528,540,528,536,526,529,316,111,94,90,83,85,58,124,445,455,479,434,67,98,88,87,87,93,40,332,479,493,506,498,522,522,515,268,100,124,107,485,506,519,438,92,71,91,87,78,78,84,87,52,84,267,511,526,530,531,525,516,527,98,140,130,85,454,430,448,504,126,84,119,73,526,495,511,507,489,510,494,494,481,508,500,479,461,464,495,485,478,474,480,477,462,475,456,469,429,453,226,163,153,146,148,138,129,150,131,131,170,186,238,319,324,342,337,376,366,369,366,363,367,367,367,364,355,348,338,348,325,322,340,322,329,336,323,317,317,317,312,315,315,319,312,312 ],
	[ 255,266,252,260,237,237,243,233,231,239,250,236,239,242,244,244,245,245,233,237,264,260,258,261,265,265,278,268,255,245,215,239,248,255,261,251,284,256,280,276,262,276,274,277,293,293,283,283,291,295,285,288,283,262,274,295,307,324,306,298,329,321,298,323,317,296,300,307,313,319,308,329,338,341,346,352,358,326,344,341,339,378,357,345,367,364,362,351,350,354,365,377,378,371,368,365,364,389,395,391,409,382,389,396,409,381,396,403,416,408,406,438,459,420,435,421,441,445,451,447,434,403,404,407,420,432,463,418,435,431,447,436,449,461,447,465,473,445,466,459,472,475,471,454,463,484,464,477,473,491,495,491,483,493,500,500,505,497,499,485,490,507,496,511,496,499,499,507,502,541,534,531,520,532,512,530,548,531,490,527,560,560,549,563,566,556,560,560,558,558,566,555,556,562,564,568,555,562,551,565,564,578,580,586,594,590,604,604,605,602,593,593,610,610,621,609,617,617,624,628,622,615,615,615,617,635,637,640,642,646,637,643,642,648,650,643,649,649,661,665,678,674,683,679,671,675,676,676,682,679,682,688,694,683,690,703,717,721,713,710,704,701,712,706,715,712,710,710,716,712,722,718,661,591,566,566,568,544,565,558,557,561,565,554,569,566,572,559,554,546,551,530,308,395,528,465,318,485,515,422,183,214,226,211,503,554,430,253,266,346,522,591,569,569,572,488,369,543,563,567,478,303,414,555,366,290,477,589,569,520,304,278,259,238,220,339,574,558,563,389,397,547,523,538,468,255,289,289,532,558,425,284,557,557,570,549,270,295,240,261,270,473,573,559,562,339,278,310,390,585,570,565,455,344,443,573,463,352,484,631,429,399,607,680,467,464,681,702,694,694,695,689,688,568,402,534,644,497,404,606,657,665,653,661,526,393,512,659,647,668,519,306,296,289,289,265,639,549,341,383,670,670,680,502,476,673,645,429,540,663,646,653,654,654,650,674,290,293,313,337,609,487,336,326,333,592,633,619,597,304,323,581,506,266,288,267,247,208,477,624,626,639,411,317,571,540,318,294,626,620,622,622,623,618,627,627,635,650,653,660,675,678,687,690,680,680,676,672,675,669,673,670,670,678,672,672,661,661,650,650,650,645,651,638,634,637,639,642,643,640,622,622,616,613,589,602,592,592,606,606,601,583,585,578,571,563,573,580,572,589,587,574,569,572,551,525,540,530,530,524,545,566,548,545,528,522,517,514,515,494,494,487,501,498,502,474,440,495,458,451,478,481,431,446,464,467,472,472,479,461,460,453,427,441,405,399,426,408,408,408,423,428,439,418,380,390,372,389,397,401,391,385,366,390,364,368,398,377,406,398,399,389,378,378,381,371,349,345,350,346,336,336,362,348,343,351,340,316,344,337,330,335,334,323,340,343,323,337,312,337,297,331,305,301,312,318,319,319,330,285 ]
],
y0	= 100,
H	= 10;

/*
,

drawY	= (Y,k,style)=>{
	context.beginPath();
	for(let x=0;x<Y.length;x++){
		context.moveTo(x+.5,y0);
		context.lineTo(x+.5,y0+Y[x]*k);
	}
	context.strokeStyle = style;			
	context.lineWidth = 1;
	context.stroke();
},

drawW = (W,style)=>{
	context.fillStyle = style;
	let i=0,x=0;
	while(i<W.length){
		const a=W[i++], b=W[i++];
		context.fillRect(x+a, y0+25, b, 40);
		x+=a+b;
	}
},

drawT	= (T,style)=>{
	context.fillStyle = style;		
	context.fillText(T, 20, 20);
}
;
*/	

</script>



</body>
</html>
